<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>G√©n√©rateur de mots de passe - Useful Tools</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gradient-to-br from-slate-900 to-slate-800 min-h-screen text-white">
    <div class="container mx-auto px-4 py-8 max-w-2xl">
        <a href="../index.html" class="text-blue-400 hover:text-blue-300 mb-6 inline-block">‚Üê Retour</a>
        <h1 class="text-4xl font-bold mb-2">üîë G√©n√©rateur de mots de passe</h1>
        <p class="text-gray-400 mb-8">Cr√©ez des mots de passe s√©curis√©s</p>

        <div class="bg-slate-800 rounded-xl p-6 border border-slate-700">
            <div class="mb-6">
                <label class="block text-sm font-medium mb-2">Longueur: <span id="length-value">16</span></label>
                <input type="range" id="length" min="4" max="64" value="16" class="w-full accent-blue-500">
            </div>

            <div class="grid grid-cols-2 gap-4 mb-6">
                <label class="flex items-center gap-2 cursor-pointer">
                    <input type="checkbox" id="uppercase" checked class="w-5 h-5 accent-blue-500">
                    <span>Majuscules (A-Z)</span>
                </label>
                <label class="flex items-center gap-2 cursor-pointer">
                    <input type="checkbox" id="lowercase" checked class="w-5 h-5 accent-blue-500">
                    <span>Minuscules (a-z)</span>
                </label>
                <label class="flex items-center gap-2 cursor-pointer">
                    <input type="checkbox" id="numbers" checked class="w-5 h-5 accent-blue-500">
                    <span>Chiffres (0-9)</span>
                </label>
                <label class="flex items-center gap-2 cursor-pointer">
                    <input type="checkbox" id="symbols" checked class="w-5 h-5 accent-blue-500">
                    <span>Symboles (!@#$...)</span>
                </label>
            </div>

            <div class="relative mb-6">
                <input type="text" id="password" readonly class="w-full bg-slate-700 border border-slate-600 rounded-lg p-4 text-white font-mono text-xl text-center pr-24">
                <button onclick="copyPassword()" class="absolute right-2 top-1/2 -translate-y-1/2 bg-blue-600 hover:bg-blue-700 px-4 py-2 rounded-lg text-sm font-medium transition-colors">üìã Copier</button>
            </div>

            <div class="mb-6">
                <div class="flex justify-between text-sm mb-1">
                    <span>Force:</span>
                    <span id="strength-text">Tr√®s fort</span>
                </div>
                <div class="w-full bg-slate-700 rounded-full h-2">
                    <div id="strength-bar" class="h-2 rounded-full transition-all bg-green-500" style="width: 100%"></div>
                </div>
            </div>

            <button onclick="generate()" class="w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 px-6 rounded-lg transition-colors">
                üîÑ G√©n√©rer un nouveau mot de passe
            </button>

            <div id="history" class="mt-6 hidden">
                <h3 class="text-sm font-medium mb-2 text-gray-400">Historique (cette session)</h3>
                <div id="history-list" class="space-y-2 max-h-40 overflow-y-auto"></div>
            </div>
        </div>
    </div>

    <script>
        const history = [];
        const chars = { uppercase: 'ABCDEFGHIJKLMNOPQRSTUVWXYZ', lowercase: 'abcdefghijklmnopqrstuvwxyz', numbers: '0123456789', symbols: '!@#$%^&*()_+-=[]{}|;:,.<>?' };

        function generate() {
            const length = parseInt(document.getElementById('length').value);
            let charset = '';
            ['uppercase', 'lowercase', 'numbers', 'symbols'].forEach(type => {
                if (document.getElementById(type).checked) charset += chars[type];
            });
            if (!charset) { alert('S√©lectionnez au moins une option'); return; }

            let password = '';
            const array = new Uint32Array(length);
            crypto.getRandomValues(array);
            for (let i = 0; i < length; i++) password += charset[array[i] % charset.length];

            document.getElementById('password').value = password;
            updateStrength(password);
            addToHistory(password);
        }

        function updateStrength(password) {
            let score = 0;
            if (password.length >= 12) score += 25;
            if (password.length >= 16) score += 25;
            if (/[A-Z]/.test(password)) score += 15;
            if (/[a-z]/.test(password)) score += 10;
            if (/[0-9]/.test(password)) score += 15;
            if (/[^A-Za-z0-9]/.test(password)) score += 10;

            const bar = document.getElementById('strength-bar');
            const text = document.getElementById('strength-text');
            bar.style.width = score + '%';
            if (score < 30) { bar.className = 'h-2 rounded-full transition-all bg-red-500'; text.textContent = 'Faible'; }
            else if (score < 60) { bar.className = 'h-2 rounded-full transition-all bg-yellow-500'; text.textContent = 'Moyen'; }
            else if (score < 80) { bar.className = 'h-2 rounded-full transition-all bg-blue-500'; text.textContent = 'Fort'; }
            else { bar.className = 'h-2 rounded-full transition-all bg-green-500'; text.textContent = 'Tr√®s fort'; }
        }

        function escapeHtml(text) {
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }

        function escapeAttr(text) {
            return text.replace(/'/g, "\\'").replace(/"/g, '&quot;');
        }

        function addToHistory(password) {
            history.unshift(password);
            if (history.length > 5) history.pop();
            const list = document.getElementById('history-list');
            list.innerHTML = history.map(p => `<div class="bg-slate-700 rounded p-2 font-mono text-sm truncate cursor-pointer hover:bg-slate-600" onclick="navigator.clipboard.writeText('${escapeAttr(p)}')">${escapeHtml(p)}</div>`).join('');
            document.getElementById('history').classList.remove('hidden');
        }

        function copyPassword() { navigator.clipboard.writeText(document.getElementById('password').value); }
        document.getElementById('length').addEventListener('input', e => { document.getElementById('length-value').textContent = e.target.value; });
        generate();
    </script>
</body>
</html>

